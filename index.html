<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="initial-scale=1.0, width=device-width"/>
    <title>おポチマン</title>
    <link rel="stylesheet" href="style.css"/>
    <link rel="manifest" href="manifest.json"/>
    <script>
      navigator.serviceWorker.register("./sw.js")
    </script>
  </head>
  <body>
    <header>
      <h1 class="logo">
        <a href="/index.html">
          <img class="pochi-logo" src="assets/pochi.svg" alt="ポチ"/>
          <span class="title">おポチマン</span>
        </a>
      </h1>
      <h3>もらった金額：</h3>
      <div id="money_output"></div>
      <h3>円</h3>
      <button id="otoshidama">もらった金額を入力</button>
      <dialog id="money_modal">
        <div class="modal-content">
          <div class="modal-header">
            <h2>もらった金額</h2>
          </div>
          <div class="modal-body">
            <form id="money_input">
              <label>
                もらった金額を入力<input type="number" id="money">
              </label>
              <button id="money_submit" onclick="set_money()">決定</button>
              <button id="cancel">キャンセル</button>
            </form>
          </div>
        </div>
      </dialog>
    </header>
    <main>
      
      <canvas id="treemapView"></canvas>
      <div class="wishlist">
        <div class="wishlist-title">
          <h2>欲しい物リスト</h2>
          <button>追加</button>
        </div>
        <ol>
          <li>欲しい物</li>
        </ol>
      </div>
    </main>
    <script>
      if (!localStorage.getItem('money')) {
        document.getElementById('money_output').innerHTML = 0;
      }else{
        money_out = localStorage.getItem('money');
        document.getElementById('money_output').innerHTML = money_out;
      }



      let money_dialog = document.querySelector('dialog');
      let m_m_o = document.getElementById('otoshidama');
      let m_m_s = document.getElementById('money_submit');
      let m_m_c = document.getElementById('cancel');

      m_m_o.addEventListener('click',function(){
        money_dialog.showModal();
      },false);

      m_m_s.addEventListener('click',function() {
        money_dialog.close();
      },false);

      function set_money() {
        //ローカルストレージ保存処理
      const money = document.getElementById('money').value;
        
        localStorage.setItem('money',money);
      }
      

      m_m_c.addEventListener('click',function(){
        money_dialog.close();
      },false);
    </script>
  </body>
</html>